<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"/><meta name="theme-color" content="#222"/><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/><meta name="renderer" content="webkit"/><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"/><link rel="alternate" href="/rss.xml" title="xu·live" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="xu·live" type="application/atom+xml"><link rel="alternate" type="application/json" title="xu·live" href="https://18859421790.github.io/feed.json"/><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"/><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"/><link rel="dns-prefetch" href="https://unpkg.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.3.5"><script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.js"></script><meta name="keywords" content="前端"/><link rel="canonical" href="https://18859421790.github.io/2023/10/08/2023.10.8/"><title>react+ts 使用总结</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">react+ts 使用总结</h1><div class="meta"><span class="item" title="创建时间：2023-10-08 00:00:00"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2023-10-08T00:00:00+08:00">2023-10-08</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>18k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>16 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">xu·live</a></li></ul><ul class="right" id="rightNav"><li class="item theme" @click="changeThemeByBtn"><i class="ic" :class="{'i-sun': !themeStatus,'i-moon': themeStatus}"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><ul><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicit31ffoj20zk0m8naf.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicis3attqj20zk0m8k7l.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicitcxhpij20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giciszlczyj20zk0m816d.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giciryrr3rj20zk0m8nhk.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicis081o9j20zk0m8dmr.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemListElement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/%E6%80%BB%E7%BB%93/" itemprop="item" rel="index" title="分类于总结"><span itemprop="name">总结<meta itemprop="position" content="0"/></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://18859421790.github.io/2023/10/08/2023.10.8/"/><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"/><meta itemprop="name" content="xu"/><meta itemprop="description" content="热爱生活，认真对待每一天, 永远热泪盈眶"/></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="xu·live"/></span><div class="body md" itemprop="articleBody"><h2 id="可能是你需要的-react-typescript-50-条规范和经验"><a class="markdownIt-Anchor" href="#可能是你需要的-react-typescript-50-条规范和经验">#</a> 可能是你需要的 React + TypeScript 50 条规范和经验</h2>
<blockquote>
<p>这篇文章没有对错之分，肯定也有不完善的地方，结合了自己日常开发和经验。可以让你书写代码更具严谨性，希望看完之后有所帮助。本文字数 4000+ ，看完本文大概需半小时。</p>
</blockquote>
<h3 id="1-注释"><a class="markdownIt-Anchor" href="#1-注释">#</a> 1. 注释</h3>
<h4 id="1-文件顶部的注释包括描述-作者-日期"><a class="markdownIt-Anchor" href="#1-文件顶部的注释包括描述-作者-日期">#</a> (1) 文件顶部的注释，包括描述、作者、日期</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> <span class="variable">xxxxxx</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> <span class="variable">chengfeng</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 19/05/21</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h4 id="2-模块的注释"><a class="markdownIt-Anchor" href="#2-模块的注释">#</a> (2) 模块的注释</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拷贝数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">*</span>&#125;  data   要拷贝的源数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  &#123;<span class="type">boolean</span>&#125; [isDeep=false] 是否深拷贝，默认浅拷贝</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;         返回拷贝后的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h4 id="3-业务代码注释"><a class="markdownIt-Anchor" href="#3-业务代码注释">#</a> (3) 业务代码注释</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*业务代码注释*/</span></span><br></pre></td></tr></table></figure>
<h4 id="4-变量注释"><a class="markdownIt-Anchor" href="#4-变量注释">#</a> (4) 变量注释</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">IState</span> &#123;</span><br><span class="line">  <span class="comment">// 名字</span></span><br><span class="line">  <span class="attr">name</span>: string;</span><br><span class="line">  <span class="comment">// 电话</span></span><br><span class="line">  <span class="attr">phone</span>: number;</span><br><span class="line">  <span class="comment">// 地址</span></span><br><span class="line">  <span class="attr">address</span>: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-引用组件顺序"><a class="markdownIt-Anchor" href="#2-引用组件顺序">#</a> 2. 引用组件顺序</h3>
<ul>
<li>先引用外部组件库，再引用当前组件块级组件，然后是 common 里的公共函数库最后是 css 样式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dropdown</span>, <span class="title class_">Menu</span>, <span class="title class_">Icon</span> &#125; <span class="keyword">from</span> <span class="string">&quot;antd&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&quot;./Header&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> toast <span class="keyword">from</span> <span class="string">&quot;common/toast&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./index.less&quot;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="3-引号"><a class="markdownIt-Anchor" href="#3-引号">#</a> 3. 引号</h3>
<ul>
<li>使用单引号，或者 es6 的反引号</li>
</ul>
<h3 id="4-缩进"><a class="markdownIt-Anchor" href="#4-缩进">#</a> 4. 缩进</h3>
<ul>
<li>使用两个空格</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleCheck</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  onCancel &amp;&amp; <span class="title function_">onCancel</span>();</span><br><span class="line">  onClose &amp;&amp; <span class="title function_">onClose</span>();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="5-分号"><a class="markdownIt-Anchor" href="#5-分号">#</a> 5. 分号</h3>
<ul>
<li>除了代码块的以外的每个表达式后必须加分号。</li>
</ul>
<h3 id="6-括号"><a class="markdownIt-Anchor" href="#6-括号">#</a> 6. 括号</h3>
<p>下列关键字后必须有大括号（即使代码块的内容只有一行）：if, else, for, while, do, switch, try, catch, finally, with。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// not good</span></span><br><span class="line"><span class="keyword">if</span> (condition) <span class="title function_">doSomething</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">  <span class="title function_">doSomething</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-空格"><a class="markdownIt-Anchor" href="#7-空格">#</a> 7. 空格</h3>
<ul>
<li>二元和三元运算符两侧必须有一个空格，一元运算符与操作对象之间不允许有空格。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">++ x;</span><br><span class="line">y ++;</span><br><span class="line">z = x?1:2;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">++x;</span><br><span class="line">y++;</span><br><span class="line">z = x ? 1 : 2;</span><br></pre></td></tr></table></figure>
<ul>
<li>用作代码块起始的左花括号 { 前必须有一个空格。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line"><span class="keyword">if</span> (condition)&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (condition)&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">funcName</span></span>()&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (condition) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">funcName</span></span>() &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>if /else/for /while/function /switch/do /try/catch /finally 关键字后，必须有一个空格。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line"><span class="keyword">if</span>(condition) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(condition) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (condition) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ul>
<li>在对象创建时，属性中的：之后必须有空格，: 之前不允许有空格。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">var obj = &#123;</span><br><span class="line">    a : 1,</span><br><span class="line">    b:2,</span><br><span class="line">    c :3</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">var obj = &#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: 2,</span><br><span class="line">    c: 3</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="8-换行"><a class="markdownIt-Anchor" href="#8-换行">#</a> 8. 换行</h3>
<ul>
<li>每个独立语句结束后必须换行。</li>
<li>在函数声明、函数表达式、函数调用、对象创建、数组创建、for 语句等场景中，不允许在，或；前换行</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">var obj = &#123;</span><br><span class="line">    a: 1</span><br><span class="line">    , b: 2</span><br><span class="line">    , c: 3,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">test</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (const key <span class="keyword">in</span> object)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="keyword">if</span> (object.hasOwnProperty(key)) &#123;</span><br><span class="line">    const element = object[key];</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// good</span><br><span class="line">var obj = &#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: 2,</span><br><span class="line">    c: 3,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">test</span></span>() &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (const key <span class="keyword">in</span> object) &#123;</span><br><span class="line">  <span class="keyword">if</span> (object.hasOwnProperty(key)) &#123;</span><br><span class="line">    const element = object[key];</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>下列关键字后：else, catch, finally 不需要换行</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">catch (e) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">finally &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; catch (e) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-数组-对象"><a class="markdownIt-Anchor" href="#9-数组-对象">#</a> 9. 数组、对象</h3>
<ul>
<li>对象属性名不需要加引号；</li>
<li>对象以缩进的形式书写，不要写在一行；</li>
<li>数组最后不要有逗号。</li>
<li>对象最后要有逗号。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// bad</span><br><span class="line">const a = &#123;</span><br><span class="line">    <span class="string">&#x27;b&#x27;</span>: 1</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const a = &#123;b: 1&#125;;</span><br><span class="line"></span><br><span class="line">const a = &#123;</span><br><span class="line">    b: 1,</span><br><span class="line">    c: 2</span><br><span class="line">&#125;;</span><br><span class="line">const arr = [1, 2, 3, 4,];</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">const a = &#123;</span><br><span class="line">    b: 1,</span><br><span class="line">    c: 2,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const arr = [1, 2, 3, 4];</span><br></pre></td></tr></table></figure>
<h3 id="10-命名"><a class="markdownIt-Anchor" href="#10-命名">#</a> 10. 命名</h3>
<ul>
<li>
<p>类名：大驼峰式风格，字母和数字，例如：AbcTest。禁止汉字、特殊符号，禁止非大驼峰式风格。</p>
</li>
<li>
<p>函数名：小驼峰式风格，字母和数字，例如：abcTest。禁止汉字、特殊符号，禁止非小驼峰式风格，例如 snake_case 等。</p>
</li>
<li>
<p>变量名：同函数名。</p>
</li>
<li>
<p>常量：全大写风格，大写字母、数字和下划线，单词之间以下划线分隔，例如：ABC_TEST。禁止汉字、特殊符号、小写字母。</p>
</li>
<li>
<p>使用 onXxx 形式作为 props 中用于回调的属性名称。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">IProps</span> &#123;</span><br><span class="line">  onClose?: <span class="function">() =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">  onOk?: <span class="function">(<span class="params">item: Record&lt;string, any&gt;</span>) =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>组件内的事件函数使用 handle 开头尾，handleCheckBtn。</li>
<li>使用 withXxx 形式的词作为高阶组件的名称。</li>
<li>接口命名前面带上 I 表示 interface</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">IProps</span> &#123;&#125;</span><br><span class="line">interface <span class="title class_">IState</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-类型断言"><a class="markdownIt-Anchor" href="#11-类型断言">#</a> 11. 类型断言</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line"><span class="keyword">function</span> getLength(something: string | number): number &#123;</span><br><span class="line">    <span class="built_in">return</span> something.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.ts(2,22): error TS2339: Property <span class="string">&#x27;length&#x27;</span> does not exist on <span class="built_in">type</span> <span class="string">&#x27;string | number&#x27;</span>.</span><br><span class="line">//   Property <span class="string">&#x27;length&#x27;</span> does not exist on <span class="built_in">type</span> <span class="string">&#x27;number&#x27;</span>.</span><br><span class="line"></span><br><span class="line">// bad</span><br><span class="line"><span class="keyword">function</span> getLength(something: string | number): number &#123;</span><br><span class="line">    <span class="keyword">if</span> ((&lt;string&gt;something).length) &#123;</span><br><span class="line">        return (&lt;string&gt;something).length;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return something.toString().length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">function getLength(something: string | number): number &#123;</span><br><span class="line">  if (typeof something === &#x27;string&#x27;) &#123;</span><br><span class="line">    return something.length;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return something.toString().length;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="12-interface-声明顺序"><a class="markdownIt-Anchor" href="#12-interface-声明顺序">#</a> 12. interface 声明顺序</h3>
<p>日常用到比较多的是四种，只读参数放第一位，必选参数第二位，可选参数次之，不确定参数放最后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface iProps &#123;</span><br><span class="line">  <span class="built_in">readonly</span> x: number;</span><br><span class="line">  <span class="built_in">readonly</span> y: number;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">  height?: number;</span><br><span class="line">  [propName: string]: any;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-ts-好用的相关工具泛型"><a class="markdownIt-Anchor" href="#13-ts-好用的相关工具泛型">#</a> 13. ts 好用的相关工具泛型</h3>
<ul>
<li>Record&lt;string,any&gt; 用这个来声明对象结构的类型</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">用于定义一个javascript的对象，key是字符串，value是任意类型</span><br><span class="line">const people:Record&lt;string,any&gt; = &#123;</span><br><span class="line">    name: <span class="string">&#x27;chengfeng&#x27;</span>,</span><br><span class="line">    age: 10</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Partial 作用是将传入的属性变为可选项.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface iPeople &#123;</span><br><span class="line">    title: string;</span><br><span class="line">    name: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const people: Partial&lt;iPeople&gt; = &#123;</span><br><span class="line">    title: <span class="string">&#x27;Delete inactive users&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line">定义的结构可以是接口iPeople的任意key</span><br></pre></td></tr></table></figure>
<ul>
<li>Readonly 作用是将传入的属性变为变成只读</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">interface iPeople &#123;</span><br><span class="line">    title: string;</span><br><span class="line">    name: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const people: Readonly&lt;Todo&gt; = &#123;</span><br><span class="line">    title: <span class="string">&#x27;todo list&#x27;</span>,</span><br><span class="line">    name: chenfeng;</span><br><span class="line">&#125;;</span><br><span class="line">title name属性就是只读的了</span><br></pre></td></tr></table></figure>
<ul>
<li>Required 的作用是将传入的属性变为必选项</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface iPeople &#123;</span><br><span class="line">    title?: string;</span><br><span class="line">    name?: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const people1: Props = &#123; title: <span class="string">&#x27;ts&#x27;</span> &#125;; // OK</span><br><span class="line"></span><br><span class="line">const people22: Required&lt;iPeople&gt; = &#123; title: <span class="string">&#x27;ts&#x27;</span> &#125;; // Error: property <span class="string">&#x27;name&#x27;</span> missing</span><br></pre></td></tr></table></figure>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LUhhbmRib29rL2RpZmZzLzA/YmFzZV9zaGE9MjJiMzdhMmQ4YzlhMWRkMzc4Nzk1NDQ0YmFmOTU0YzJlN2VjY2NmNSZhbXA7Y29tbWVudGFibGU9dHJ1ZSZhbXA7aGVhZF91c2VyPWNzYW50b3M0MiZhbXA7cHVsbF9udW1iZXI9ODAxJmFtcDtzaGExPTIyYjM3YTJkOGM5YTFkZDM3ODc5NTQ0NGJhZjk1NGMyZTdlY2NjZjUmYW1wO3NoYTI9OWQ0YzU2ZjVkNDE0ZGJlMjM3ODA3MTk4ODViYWEzZGY0MDIyMjQxMiZhbXA7c2hvcnRfcGF0aD0wYjJkYTUxJmFtcDt1bmNoYW5nZWQ9ZXhwYW5kZWQmYW1wO3V0Zjg9JUUyJTlDJTkzI3JlcXVpcmVkdA==">查看更多</span></p>
<h3 id="14-ts-一些好用的小-tips"><a class="markdownIt-Anchor" href="#14-ts-一些好用的小-tips">#</a> 14. ts 一些好用的小 tips</h3>
<ul>
<li>keyof</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface iPeople &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> T = keyof iPeople // -&gt; <span class="string">&quot;name&quot;</span> | <span class="string">&quot;age&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>in</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> Keys = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;b&quot;</span></span><br><span class="line"><span class="built_in">type</span> Obj =  &#123;</span><br><span class="line">  [p <span class="keyword">in</span> Keys]: any</span><br><span class="line">&#125; // -&gt; &#123; a: any, b: any &#125;</span><br></pre></td></tr></table></figure>
<h3 id="15-规范其他"><a class="markdownIt-Anchor" href="#15-规范其他">#</a> 15. 规范其他</h3>
<ul>
<li>不要使用 var 声明变量</li>
<li>不会被修改的变量使用 const 声明</li>
<li>去除声明但未被引用的代码</li>
<li>禁止在代码里使用 debug</li>
<li>不允许有空的代码块</li>
</ul>
<h3 id="16-仅当初始-state-需要从-props-计算得到的时候才将-state-的声明放在构造函数中其它情况下使用静态属性声明-state并且一般情况下不要将-prop-传给-state"><a class="markdownIt-Anchor" href="#16-仅当初始-state-需要从-props-计算得到的时候才将-state-的声明放在构造函数中其它情况下使用静态属性声明-state并且一般情况下不要将-prop-传给-state">#</a> 16. 仅当初始 state 需要从 props 计算得到的时候，才将 state 的声明放在构造函数中，其它情况下使用静态属性声明 state, 并且一般情况下不要将 prop 传给 state，</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="title function_">constructor</span> ()&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">people</span>: <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">people</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="attr">state</span>: <span class="title class_">IState</span> = &#123;</span><br><span class="line">  <span class="attr">people</span>: &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="17-渲染默认值"><a class="markdownIt-Anchor" href="#17-渲染默认值">#</a> 17. 渲染默认值</h3>
<ul>
<li>添加非空判断可以提高代码的稳健性，例如后端返回的一些值，可能会出现不存在的情况，应该要给默认值.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">  &#123;name&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">  &#123;!!name || <span class="string">&#x27;--&#x27;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>还有一种情况，就是本来后端应该返回一个数组给你，但是数据库取不到数据，可能后端给你返回了 null, 然后前端 null.length。这样就 gg 了</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> &#123; list, totalCount &#125; = <span class="keyword">await</span> <span class="title function_">getPeopleList</span>(keyword, page, pageSize);</span><br><span class="line">list 可能是<span class="literal">null</span>或者<span class="literal">undefined</span></span><br><span class="line">list.<span class="property">length</span>将直接导致前端报错</span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="variable constant_">STATUS</span>.<span class="property">READY</span>,</span><br><span class="line">  <span class="attr">apps</span>: list,</span><br><span class="line">  <span class="attr">total</span>: totalCount,</span><br><span class="line">  <span class="attr">page</span>: page,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> &#123; list, totalCount &#125; = <span class="keyword">await</span> <span class="title function_">getPeopleList</span>(keyword, page, pageSize);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="variable constant_">STATUS</span>.<span class="property">READY</span>,</span><br><span class="line">  <span class="attr">apps</span>: list || [],</span><br><span class="line">  <span class="attr">total</span>: totalCount || <span class="number">0</span>,</span><br><span class="line">  <span class="attr">page</span>: page,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="18-不确定的属性最后却疯狂的用访问不存在的属性"><a class="markdownIt-Anchor" href="#18-不确定的属性最后却疯狂的用访问不存在的属性">#</a> 18. 不确定的属性，最后却疯狂的用… 访问不存在的属性</h3>
<p>例如一些地方，不确定这个变量里面到底有什么，但自己觉得有，就疯狂的…, 最明显的就是后端返回了一个对象给你，前端拿到之后判断都不判断直接 data.dataList.forEach ()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">getPeopleList</span>(keyword, page, pageSize);</span><br><span class="line">data.<span class="property">dataList</span>.<span class="title function_">forEach</span>() <span class="comment">// 直接挂了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">getPeopleList</span>(keyword, page, pageSize);</span><br><span class="line"><span class="keyword">if</span> (data &amp;&amp; data.<span class="property">dataList</span> &amp;&amp; <span class="title class_">Array</span>.<span class="title function_">isArray</span>(<span class="params">data.dataList</span>) &#123;</span><br><span class="line">    data.<span class="property">dataList</span>.<span class="title function_">forEach</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="19-数据格式转换"><a class="markdownIt-Anchor" href="#19-数据格式转换">#</a> 19. 数据格式转换</h3>
<ol>
<li>把字符串转整型可以使用 + 号</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> maxPrice = +form.<span class="property">maxPrice</span>.<span class="property">value</span>;</span><br><span class="line"><span class="keyword">let</span> maxPrice = <span class="title class_">Number</span>(form.<span class="property">maxPrice</span>.<span class="property">value</span>);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>转成 boolean 值用！！</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mobile = !!ua.<span class="title function_">match</span>(<span class="regexp">/iPhone|iPad|Android|iPod|Windows Phone/</span>);</span><br></pre></td></tr></table></figure>
<h3 id="20-判断条件真假"><a class="markdownIt-Anchor" href="#20-判断条件真假">#</a> 20. 判断条件真假</h3>
<p>js 中以下为假，其他情况为真</p>
<ul>
<li>false</li>
<li>null</li>
<li>undefined</li>
<li>0</li>
<li>‘’ (空字符串)</li>
<li>NaN</li>
</ul>
<h3 id="21-简单组件可以使用函数代替"><a class="markdownIt-Anchor" href="#21-简单组件可以使用函数代替">#</a> 21. 简单组件可以使用函数代替</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Listing</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.hello&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Listing</span>(<span class="params">&#123; hello &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;hello&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="22-对于常用的属性进行缓存"><a class="markdownIt-Anchor" href="#22-对于常用的属性进行缓存">#</a> 22. 对于常用的属性进行缓存</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">app</span>.<span class="property">openid</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">time</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> &#123; app &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; time &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(app.<span class="property">openid</span>);</span><br></pre></td></tr></table></figure>
<h3 id="23-input-输入框使用-trim"><a class="markdownIt-Anchor" href="#23-input-输入框使用-trim">#</a> 23. input 输入框使用 trim ()</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">let</span> searchContent = form.<span class="property">search</span>.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">let</span> searchContent = form.<span class="property">search</span>.<span class="property">value</span>.<span class="title function_">trim</span>();</span><br></pre></td></tr></table></figure>
<h3 id="24-使用-location-跳转前需要先转义"><a class="markdownIt-Anchor" href="#24-使用-location-跳转前需要先转义">#</a> 24. 使用 location 跳转前需要先转义</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = redirectUrl + <span class="string">&quot;?a=10&amp;b=20&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = redirectUrl + <span class="built_in">encodeURIComponent</span>(<span class="string">&quot;?a=10&amp;b=20&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="25-使用-react-router"><a class="markdownIt-Anchor" href="#25-使用-react-router">#</a> 25. 使用 react-router</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">import</span> &#123; withRouter, <span class="title class_">RouteComponentProps</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">IProps</span> <span class="keyword">extends</span> <span class="title class_">RouteComponentProps</span>&lt;any&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&lt;<span class="title class_">IProps</span>, <span class="title class_">AppStates</span>&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withRouter</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">import</span> &#123; withRouter, <span class="title class_">RouteComponentProps</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&lt;</span><br><span class="line">  <span class="title class_">IProps</span> &amp; <span class="title class_">RouteComponentProps</span>&lt;&#123;&#125;&gt;,</span><br><span class="line">  <span class="title class_">AppStates</span></span><br><span class="line">&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withRouter</span>(<span class="title class_">App</span>);</span><br></pre></td></tr></table></figure>
<h3 id="26-同时开发数据请求-api-目录-git-冲突目录方案"><a class="markdownIt-Anchor" href="#26-同时开发数据请求-api-目录-git-冲突目录方案">#</a> 26. 同时开发，数据请求 api 目录 git 冲突目录方案</h3>
<ul>
<li>在 api 目录下新建一个目录，目录对应一级 tab, 这个目录内放置一个 index.js ，最后把二级 tab 组件所使用的 api 请求都在这个 index.js 内引入。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 目前</span><br><span class="line"></span><br><span class="line">|- api</span><br><span class="line">  |- pageA.ts</span><br><span class="line">  |- pageB.ts</span><br><span class="line"></span><br><span class="line">// 建议</span><br><span class="line"></span><br><span class="line">|- api</span><br><span class="line">  |- pageA</span><br><span class="line">    |- index.js</span><br><span class="line">    |- aaa.js</span><br><span class="line">    |- bbb.js</span><br><span class="line">  |- pageB</span><br><span class="line">    |- index.js</span><br><span class="line">    |- aaa.js</span><br><span class="line">    |- bbb.js</span><br><span class="line">    |- ccc.js</span><br></pre></td></tr></table></figure>
<h3 id="27-组件嵌套过深"><a class="markdownIt-Anchor" href="#27-组件嵌套过深">#</a> 27. 组件嵌套过深</h3>
<ul>
<li>组件一般不要超过三层，最多四层，层级过深可能会导致数据传递过深，在做一些颗粒度比较细的操作的时候，处理起来较为繁琐，可以使用 redux 等状态管理工具替代。</li>
</ul>
<h3 id="28-代码过滤掉你没考虑到的情况"><a class="markdownIt-Anchor" href="#28-代码过滤掉你没考虑到的情况">#</a> 28. 代码过滤掉你没考虑到的情况</h3>
<ul>
<li>例如一个函数，你只想操作字符串，那你必须在函数开头就只允许参数是字符串</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> parse (str:string)&#123;</span><br><span class="line">  <span class="keyword">if</span> (typeof(str) === <span class="string">&#x27;string&#x27;</span> ) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="29-业务代码里面的异步请求需要-try-catch"><a class="markdownIt-Anchor" href="#29-业务代码里面的异步请求需要-try-catch">#</a> 29. 业务代码里面的异步请求需要 try catch</h3>
<ul>
<li>ajax 请求，使用 try catch，错误提示后端返回，并且做一些失败后的状态操作例如进入列表页，我们需要一个 loading 状态，然后去请求数据，可是失败之后，也需要把 loading 状态去掉，把 loading 隐藏的代码就写在 finally 里面。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">getStudentList = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">isEmpty</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">getStudentList</span>(&#123;&#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">//  失败之后的一些兜底操作</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">isEmpty</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="30-setstate-有三种用法"><a class="markdownIt-Anchor" href="#30-setstate-有三种用法">#</a> 30. setState 有三种用法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 对象</span><br><span class="line">this.setState(&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 函数，一般是用于在setState之前做一些操作</span><br><span class="line">this.setState(</span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">    // TODO</span><br><span class="line">    console.log(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">return</span> &#123;</span><br><span class="line">      a:300</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// 第二个参数，一般是用于在setState之后做一些操作</span><br><span class="line">this.setState(&#123;</span><br><span class="line">  a:300</span><br><span class="line">&#125;, () =&gt; &#123;</span><br><span class="line">  // TODO</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="31-setstate-可能是同步的"><a class="markdownIt-Anchor" href="#31-setstate-可能是同步的">#</a> 31. setState 可能是同步的</h3>
<ul>
<li>setState 在 react 里的合成事件和钩子函数中是 “异步” 的。</li>
<li>setState 在原生事件和 setTimeout 中是同步的。</li>
</ul>
<h3 id="32-不要在-setstate-前面加-await"><a class="markdownIt-Anchor" href="#32-不要在-setstate-前面加-await">#</a> 32. 不要在 setState 前面加 await</h3>
<ul>
<li>setState 前面也是可以带 await 的，会变成同步设置状态，但这是一种巧合，不确定未来哪个版本就不支持了，为了遵循 react 框架的设计原则，我们使用回掉函数的形式。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">func = <span class="keyword">async</span> (name, value, status) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">    name,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">func = <span class="function">(<span class="params">name, value, status</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setState</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      name,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="33-阻止事件默认行为"><a class="markdownIt-Anchor" href="#33-阻止事件默认行为">#</a> 33. 阻止事件默认行为</h3>
<ul>
<li>在 React 中你不能通过返回 false 来阻止默认行为。必须明确调用 preventDefault 。</li>
</ul>
<h3 id="34-在-componentwillunmount-里面去除副作用的函数"><a class="markdownIt-Anchor" href="#34-在-componentwillunmount-里面去除副作用的函数">#</a> 34. 在 componentWillUnmount 里面去除副作用的函数</h3>
<ul>
<li>清除 EventListener</li>
<li>中止数据请求</li>
<li>清除定时器</li>
</ul>
<h3 id="35-key"><a class="markdownIt-Anchor" href="#35-key">#</a> 35. key</h3>
<ul>
<li>对于组件中的 key 优化，起到最大化重用 dom</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//bad</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">dataAry</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//good</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">dataAry</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure>
<h3 id="36-for-in-中一定要有-hasownproperty-的判断即禁止直接读取原型对象的属性"><a class="markdownIt-Anchor" href="#36-for-in-中一定要有-hasownproperty-的判断即禁止直接读取原型对象的属性">#</a> 36. for-in 中一定要有 hasOwnProperty 的判断（即禁止直接读取原型对象的属性）</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//bad</span></span><br><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  arr.<span class="title function_">push</span>(obj[key]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//good</span></span><br><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">    arr.<span class="title function_">push</span>(obj[key]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="37-第三方库函数的使用"><a class="markdownIt-Anchor" href="#37-第三方库函数的使用">#</a> 37. 第三方库函数的使用</h3>
<ul>
<li>用 try catch 包裹，防止第三方库的出现错误，导致整个程序崩溃</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Echart 用于代绘制图表，但当其自身发生错误时，可能影响到业务代码的执行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">const</span> iniDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;init-container&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> echartObj = echarts.<span class="title function_">init</span>(iniDom);</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(</span><br><span class="line">  &#123;</span><br><span class="line">    echartObj,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; echartObj &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="comment">// 更新图表</span></span><br><span class="line">    echartObj.<span class="title function_">setOption</span>(<span class="variable constant_">CHART_CONFIG</span>, <span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> iniDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;init-container&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> echartObj = echarts.<span class="title function_">init</span>(iniDom);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setState</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      echartObj,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; echartObj &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">      <span class="comment">// 更新图表</span></span><br><span class="line">      echartObj.<span class="title function_">setOption</span>(<span class="variable constant_">CHART_CONFIG</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="38-防止-xss-攻击"><a class="markdownIt-Anchor" href="#38-防止-xss-攻击">#</a> 38. 防止 xss 攻击</h3>
<ul>
<li>input，textarea 等标签，不要直接把 html 文本直接渲染在页面上，使用 xssb 等过滤之后再输出到标签上；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; html2text &#125; <span class="keyword">from</span> <span class="string">&#x27;xss&#x27;</span>;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">__html:</span> <span class="attr">html2text</span>(<span class="attr">htmlContent</span>)</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="39-在组件中获取真实-dom"><a class="markdownIt-Anchor" href="#39-在组件中获取真实-dom">#</a> 39. 在组件中获取真实 dom</h3>
<ul>
<li>使用 16 版本后的 createRef () 函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&lt;iProps, iState&gt; &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputRef</span> = <span class="title class_">React</span>.<span class="title function_">createRef</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;this.inputRef&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">inputRef</span>.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="40-减少魔法数字"><a class="markdownIt-Anchor" href="#40-减少魔法数字">#</a> 40. 减少魔法数字</h3>
<ul>
<li>写代码的时候尽量减少一些未知含义的数字，尽量用英文单词。例如 type === 0 的时候做了一些操作，让人不知所以然。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">if</span> (type !== <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">STATUS</span>: <span class="title class_">Record</span>&lt;string, any&gt; = &#123;</span><br><span class="line">  <span class="attr">READY</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">FETCHING</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">FAILED</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (type === <span class="variable constant_">STATUS</span>.<span class="property">READY</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// best</span></span><br><span class="line">enum <span class="variable constant_">STATUS</span> &#123;</span><br><span class="line">  <span class="comment">// 就绪</span></span><br><span class="line">  <span class="variable constant_">READY</span> = <span class="number">0</span>,</span><br><span class="line">  <span class="comment">// 请求中</span></span><br><span class="line">  <span class="variable constant_">FETCHING</span> = <span class="number">1</span>,</span><br><span class="line">  <span class="comment">// 请求失败</span></span><br><span class="line">  <span class="variable constant_">FAILED</span> = <span class="number">2</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="41-如果需要优化-react-性能一般用不到"><a class="markdownIt-Anchor" href="#41-如果需要优化-react-性能一般用不到">#</a> 41. 如果需要优化 react 性能（一般用不到）</h3>
<ul>
<li>如果组件的 state 和 props 都是简单类型，可以继承 PureComponent 而不是 Component</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span>, <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;this.state.message&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;this.state.message&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>重写 shouldComponentUpdate 方法，在 shouldComponentUpdate 里面根据 state,props 是否有改变来判断是否需要重新渲染。如果组件继承了 PureComponent 就没必要再重写 shouldComponentUpdate 方法</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; isReactPropsEqual, isReactStateEqual &#125; <span class="keyword">from</span> <span class="string">&#x27;@fe/common/lib/equal&#x27;</span>;</span><br><span class="line"><span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps:IProps, nextState:IState</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isReactStateEqual</span>(nextState,<span class="variable language_">this</span>.<span class="property">state</span>) &amp;&amp; <span class="title function_">isReactPropsEqual</span>(nextProps,<span class="variable language_">this</span>.<span class="property">props</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="42-event-事件对象类型"><a class="markdownIt-Anchor" href="#42-event-事件对象类型">#</a> 42. Event 事件对象类型</h3>
<p>很多小伙伴用了很久的 ts, 都不知道常用 Event 事件对象类型：</p>
<p>ClipboardEvent&lt;T = Element&gt; 剪贴板事件对象</p>
<p>DragEvent&lt;T = Element&gt; 拖拽事件对象</p>
<p>ChangeEvent&lt;T = Element&gt; Change 事件对象</p>
<p>KeyboardEvent&lt;T = Element&gt; 键盘事件对象</p>
<p>MouseEvent&lt;T = Element&gt; 鼠标事件对象</p>
<p>TouchEvent&lt;T = Element&gt; 触摸事件对象</p>
<p>WheelEvent&lt;T = Element&gt; 滚轮事件对象</p>
<p>AnimationEvent&lt;T = Element&gt; 动画事件对象</p>
<p>TransitionEvent&lt;T = Element&gt; 过渡事件对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MouseEvent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">IProps</span> &#123;</span><br><span class="line">  <span class="title function_">onClick</span>(<span class="attr">event</span>: <span class="title class_">MouseEvent</span>&lt;<span class="title class_">HTMLDivElement</span>&gt;): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="43-使用私有属性取代-state-状态"><a class="markdownIt-Anchor" href="#43-使用私有属性取代-state-状态">#</a> 43. 使用私有属性取代 state 状态</h3>
<p>对于一些不需要控制 ui 的状态属性，我们可以直接绑到 this 上， 即私有属性，没有必要弄到 this.state 上，不然会触发渲染机制，造成性能浪费 例如请求翻页数据的时候，我们都会有个变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">state: IState = &#123;</span><br><span class="line">  pageNo:1,</span><br><span class="line">  pageSize:10</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">queryParams:Record&lt;string,any&gt; = &#123;</span><br><span class="line">  pageNo:1,</span><br><span class="line">  pageSize:10</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="44-代码细粒度的思考"><a class="markdownIt-Anchor" href="#44-代码细粒度的思考">#</a> 44. 代码细粒度的思考</h3>
<p>总结四句话。我们在写组件或者函数的的时候，工具函数和业务逻辑抽离，表单校验和业务抽离、事件函数和业务抽离，ajax 和业务抽离。 例如有些页面是通过 location.href 跳转的，我们有些业务逻辑等都是放到 didmountMount, 但是后期改需求，可能要用 react-router 进行跳转，可能要改的逻辑就会很多了，所以函数抽离出来，需求更新就少改一点代码。 如果还不确定如何划分函数的细粒度，我有个建议。使用过两次以上的代码，要抽离组件或者函数，两次的可以不用</p>
<h3 id="45-if-else-等判断太多了后期难以维护"><a class="markdownIt-Anchor" href="#45-if-else-等判断太多了后期难以维护">#</a> 45. if else 等判断太多了，后期难以维护。</h3>
<p>个人觉得 if else 嵌套深看起来也不会太难受，难受的是，项目迭代久之后，自己都忘记曾经写过这些代码，而且类型多或者不确定有什么类型，是否后期还会加的情况下，改起来就非常复杂了，而且很容易踩坑和背锅。 用配置取代 if 嵌套，大概就是抽离一个 config.ts 出来，里面放一些配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">例如你的业务代码里面，会根据不同url参数，代码会执行不同的逻辑.</span><br><span class="line">/info?<span class="built_in">type</span>=wechat&amp;uid=123456&amp;</span><br><span class="line">const qsObj = qs(window.location.url)</span><br><span class="line">const urlType = qsObj.<span class="built_in">type</span></span><br><span class="line">// bad</span><br><span class="line"><span class="keyword">if</span> (urlType === <span class="string">&#x27;wechat&#x27;</span>) &#123;</span><br><span class="line">    doSomeThing()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="function"><span class="title">if</span></span> () &#123;</span><br><span class="line">    doSomeThing()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="function"><span class="title">if</span></span> () &#123;</span><br><span class="line">    doSomeThing()</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="function"><span class="title">if</span></span> () &#123;</span><br><span class="line">    doSomeThing()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// good</span><br><span class="line">config.t</span><br><span class="line">const urlTypeConfig: Record&lt;string, typeItem&gt; = &#123;</span><br><span class="line">  <span class="string">&#x27;wechat&#x27;</span>: &#123; // key 就是对应的<span class="built_in">type</span></span><br><span class="line">    name: <span class="string">&#x27;wechat&#x27;</span>,</span><br><span class="line">    show: [<span class="string">&#x27;header&#x27;</span>, <span class="string">&#x27;footer&#x27;</span>, <span class="string">&#x27;wechat&#x27;</span>] // 展示什么，可能是异步的</span><br><span class="line">    pession: [<span class="string">&#x27;admin&#x27;</span>], // 权限是什么，可能是异步的</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&#x27;zhifubao&#x27;</span>: &#123; // key 就是对应的<span class="built_in">type</span></span><br><span class="line">    name: <span class="string">&#x27;zhifubao&#x27;</span>,</span><br><span class="line">    show: [<span class="string">&#x27;header&#x27;</span>, <span class="string">&#x27;footer&#x27;</span>, <span class="string">&#x27;zhifubao&#x27;</span>] // 展示什么，可能是异步的</span><br><span class="line">    pession: [<span class="string">&#x27;admin&#x27;</span>], // 权限是什么，可能是异步的</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 业务逻辑</span><br><span class="line">const qsObj = qs(window.location.url)</span><br><span class="line">const urlType = qsObj.<span class="built_in">type</span></span><br><span class="line">Object.keys(urlTypeConfig).forEach(item =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(urlType === item.type) &#123;</span><br><span class="line">    doSomeThing(item.show)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="46-不要使用-renderxxx要使用函数式组件"><a class="markdownIt-Anchor" href="#46-不要使用-renderxxx要使用函数式组件">#</a> 46. 不要使用 renderXXX, 要使用函数式组件</h3>
<p>发现团队一些小伙伴为了减少 render 函数里面的代码量，会把一些元素拆分到函数里面。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// bad</span><br><span class="line">  renderHeader = () =&gt; &#123;</span><br><span class="line">    <span class="built_in">return</span> (&lt;div /&gt;)</span><br><span class="line">  &#125;</span><br><span class="line">  renderBody = () =&gt; &#123;</span><br><span class="line">    <span class="built_in">return</span> (&lt;div /&gt;)</span><br><span class="line">  &#125;</span><br><span class="line">  renderFooter = () =&gt; &#123;</span><br><span class="line">    <span class="built_in">return</span> (&lt;div /&gt;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span></span>()&#123;</span><br><span class="line">    <span class="built_in">return</span>(</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        renderHeader()</span><br><span class="line">        renderBody()</span><br><span class="line">        renderFooter()</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>更好的办法，是用函数式组件取代在当前组件里面写方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// good</span><br><span class="line"> <span class="keyword">function</span> RenderHeader(props) =  &#123;</span><br><span class="line">    <span class="built_in">return</span> (&lt;div /&gt;)</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">function</span> RenderBody(props) =  &#123;</span><br><span class="line">    <span class="built_in">return</span> (&lt;div /&gt;)</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">function</span> RenderFooter(props) =  &#123;</span><br><span class="line">    <span class="built_in">return</span> (&lt;div /&gt;)</span><br><span class="line">  &#125;</span><br><span class="line">class Component extends React.Component&lt;iProps, iState&gt;&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span>(</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;RenderHeader /&gt;</span><br><span class="line">        &lt;RenderBody /&gt;</span><br><span class="line">        &lt;RenderFooter /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="47-a-标签安全问题"><a class="markdownIt-Anchor" href="#47-a-标签安全问题">#</a> 47. a 标签安全问题</h3>
<p>使用 a 标签打开一个新窗口过程中的安全问题。新页面中可以使用 window.opener 来控制原始页面。如果新老页面同域，那么在新页面中可以任意操作原始页面。如果是不同域，新页面中依然可以通过 window.opener.location，访问到原始页面的 location 对象</p>
<p>在带有 target=&quot;_blank&quot; 的 a 标签中，加上 rel=&quot;noopener&quot; 属性。如果使用 window.open 的方式打开页面，将 opener 对象置为空。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var newWindow = window.open();</span><br><span class="line">newWindow.opener = null;</span><br></pre></td></tr></table></figure>
<h3 id="48-void-0-替代-undefined"><a class="markdownIt-Anchor" href="#48-void-0-替代-undefined">#</a> 48. void 0 替代 undefined</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">clearSessioin = () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  req.session.userName = undefined;</span><br><span class="line"></span><br><span class="line">  req.session.userName = void 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="49-前端不要操作-cookie"><a class="markdownIt-Anchor" href="#49-前端不要操作-cookie">#</a> 49. 前端不要操作 cookie</h3>
<p>在做一些前后端鉴权的时候，后端应该开启 domain,secure,httponly 严格模式，禁止前端操作 cookie，防止 csrf 攻击。</p>
<h3 id="50-代码检查插件"><a class="markdownIt-Anchor" href="#50-代码检查插件">#</a> 50. 代码检查插件</h3>
<p>我们可以使用构建工具继承 husky eslint tslint lint-stage prettier 来规范代码。</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXNsaW50LWNvbmZpZy1wcmV0dGllcg==">eslint-config-prettier</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXNsaW50LXBsdWdpbi1wcmV0dGllcg==">eslint-plugin-prettier</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXNsaW50LXBsdWdpbi1yZWFjdA==">eslint-plugin-react</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdHNsaW50LXJlYWN0">tslint-react</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdHNsaW50LXBsdWdpbi1wcmV0dGllcg==">tslint-plugin-prettier</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvdHNsaW50LWNvbmZpZy1wcmV0dGllcg==">tslint-config-prettier</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ZhaXRocmVlL3dlYi1idWlsZC10b29sLWRlbW8vdHJlZS9tYXN0ZXIvMjgtd29ya2Zsb3c=">团队开发工作流</span></li>
</ul>
<h3 id="参考"><a class="markdownIt-Anchor" href="#参考">#</a> 参考</h3>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FpcmJuYi9qYXZhc2NyaXB0L3RyZWUvbWFzdGVyL3JlYWN0I2FsaWdubWVudA==">airbnb</span></li>
<li><span class="exturl" data-url="aHR0cDovL2ltd2ViLmdpdGh1Yi5pby9Db2RlR3VpZGUv">imweb 代码规范</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC82ODQ0OTAzNTAyNjExNzU5MTE3I2hlYWRpbmctNQ==">如何无痛降低 if else 面条代码复杂度</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC82ODQ0OTAzNjM2NzQ5Nzc4OTU4I2hlYWRpbmctNQ==">你真的理解 setState 吗？</span></li>
</ul>
<div class="tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"><i class="ic i-tag"></i>前端</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2023-10-08 01:25:35" itemprop="dateModified" datetime="2023-10-08T01:25:35+08:00">2023-10-08</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>xu<i class="ic i-at"><em>@</em></i>xu·live</li><li class="link"><strong>本文链接：</strong><a href="https://18859421790.github.io/2023/10/08/2023.10.8/" title="react+ts 使用总结">https://18859421790.github.io/2023/10/08/2023.10.8/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/09/21/2023%E5%B9%B49%E6%9C%8821%E6%97%A5/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicit4jrvuj20zk0m8785.jpg" title="一言"><span class="type">上一篇</span><h3>一言</h3></a></div><div class="item right"></div></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E6%98%AF%E4%BD%A0%E9%9C%80%E8%A6%81%E7%9A%84-react-typescript-50-%E6%9D%A1%E8%A7%84%E8%8C%83%E5%92%8C%E7%BB%8F%E9%AA%8C"><span class="toc-number">1.</span> <span class="toc-text"> 可能是你需要的 React + TypeScript 50 条规范和经验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B3%A8%E9%87%8A"><span class="toc-number">1.1.</span> <span class="toc-text"> 1. 注释</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E9%A1%B6%E9%83%A8%E7%9A%84%E6%B3%A8%E9%87%8A%E5%8C%85%E6%8B%AC%E6%8F%8F%E8%BF%B0-%E4%BD%9C%E8%80%85-%E6%97%A5%E6%9C%9F"><span class="toc-number">1.1.1.</span> <span class="toc-text"> (1) 文件顶部的注释，包括描述、作者、日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A8%A1%E5%9D%97%E7%9A%84%E6%B3%A8%E9%87%8A"><span class="toc-number">1.1.2.</span> <span class="toc-text"> (2) 模块的注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A"><span class="toc-number">1.1.3.</span> <span class="toc-text"> (3) 业务代码注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%8F%98%E9%87%8F%E6%B3%A8%E9%87%8A"><span class="toc-number">1.1.4.</span> <span class="toc-text"> (4) 变量注释</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.2.</span> <span class="toc-text"> 2. 引用组件顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%95%E5%8F%B7"><span class="toc-number">1.3.</span> <span class="toc-text"> 3. 引号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BC%A9%E8%BF%9B"><span class="toc-number">1.4.</span> <span class="toc-text"> 4. 缩进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%86%E5%8F%B7"><span class="toc-number">1.5.</span> <span class="toc-text"> 5. 分号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%8B%AC%E5%8F%B7"><span class="toc-number">1.6.</span> <span class="toc-text"> 6. 括号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E7%A9%BA%E6%A0%BC"><span class="toc-number">1.7.</span> <span class="toc-text"> 7. 空格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%8D%A2%E8%A1%8C"><span class="toc-number">1.8.</span> <span class="toc-text"> 8. 换行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E6%95%B0%E7%BB%84-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.9.</span> <span class="toc-text"> 9. 数组、对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%91%BD%E5%90%8D"><span class="toc-number">1.10.</span> <span class="toc-text"> 10. 命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80"><span class="toc-number">1.11.</span> <span class="toc-text"> 11. 类型断言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-interface-%E5%A3%B0%E6%98%8E%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.12.</span> <span class="toc-text"> 12. interface 声明顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-ts-%E5%A5%BD%E7%94%A8%E7%9A%84%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E6%B3%9B%E5%9E%8B"><span class="toc-number">1.13.</span> <span class="toc-text"> 13. ts 好用的相关工具泛型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-ts-%E4%B8%80%E4%BA%9B%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B0%8F-tips"><span class="toc-number">1.14.</span> <span class="toc-text"> 14. ts 一些好用的小 tips</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E8%A7%84%E8%8C%83%E5%85%B6%E4%BB%96"><span class="toc-number">1.15.</span> <span class="toc-text"> 15. 规范其他</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E4%BB%85%E5%BD%93%E5%88%9D%E5%A7%8B-state-%E9%9C%80%E8%A6%81%E4%BB%8E-props-%E8%AE%A1%E7%AE%97%E5%BE%97%E5%88%B0%E7%9A%84%E6%97%B6%E5%80%99%E6%89%8D%E5%B0%86-state-%E7%9A%84%E5%A3%B0%E6%98%8E%E6%94%BE%E5%9C%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E5%85%B6%E5%AE%83%E6%83%85%E5%86%B5%E4%B8%8B%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7%E5%A3%B0%E6%98%8E-state%E5%B9%B6%E4%B8%94%E4%B8%80%E8%88%AC%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%8D%E8%A6%81%E5%B0%86-prop-%E4%BC%A0%E7%BB%99-state"><span class="toc-number">1.16.</span> <span class="toc-text"> 16. 仅当初始 state 需要从 props 计算得到的时候，才将 state 的声明放在构造函数中，其它情况下使用静态属性声明 state, 并且一般情况下不要将 prop 传给 state，</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E6%B8%B2%E6%9F%93%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">1.17.</span> <span class="toc-text"> 17. 渲染默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-%E4%B8%8D%E7%A1%AE%E5%AE%9A%E7%9A%84%E5%B1%9E%E6%80%A7%E6%9C%80%E5%90%8E%E5%8D%B4%E7%96%AF%E7%8B%82%E7%9A%84%E7%94%A8%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.18.</span> <span class="toc-text"> 18. 不确定的属性，最后却疯狂的用… 访问不存在的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.19.</span> <span class="toc-text"> 19. 数据格式转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6%E7%9C%9F%E5%81%87"><span class="toc-number">1.20.</span> <span class="toc-text"> 20. 判断条件真假</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E7%AE%80%E5%8D%95%E7%BB%84%E4%BB%B6%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E4%BB%A3%E6%9B%BF"><span class="toc-number">1.21.</span> <span class="toc-text"> 21. 简单组件可以使用函数代替</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%AF%B9%E4%BA%8E%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E7%BC%93%E5%AD%98"><span class="toc-number">1.22.</span> <span class="toc-text"> 22. 对于常用的属性进行缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-input-%E8%BE%93%E5%85%A5%E6%A1%86%E4%BD%BF%E7%94%A8-trim"><span class="toc-number">1.23.</span> <span class="toc-text"> 23. input 输入框使用 trim ()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-%E4%BD%BF%E7%94%A8-location-%E8%B7%B3%E8%BD%AC%E5%89%8D%E9%9C%80%E8%A6%81%E5%85%88%E8%BD%AC%E4%B9%89"><span class="toc-number">1.24.</span> <span class="toc-text"> 24. 使用 location 跳转前需要先转义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-%E4%BD%BF%E7%94%A8-react-router"><span class="toc-number">1.25.</span> <span class="toc-text"> 25. 使用 react-router</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-%E5%90%8C%E6%97%B6%E5%BC%80%E5%8F%91%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82-api-%E7%9B%AE%E5%BD%95-git-%E5%86%B2%E7%AA%81%E7%9B%AE%E5%BD%95%E6%96%B9%E6%A1%88"><span class="toc-number">1.26.</span> <span class="toc-text"> 26. 同时开发，数据请求 api 目录 git 冲突目录方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-%E7%BB%84%E4%BB%B6%E5%B5%8C%E5%A5%97%E8%BF%87%E6%B7%B1"><span class="toc-number">1.27.</span> <span class="toc-text"> 27. 组件嵌套过深</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-%E4%BB%A3%E7%A0%81%E8%BF%87%E6%BB%A4%E6%8E%89%E4%BD%A0%E6%B2%A1%E8%80%83%E8%99%91%E5%88%B0%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">1.28.</span> <span class="toc-text"> 28. 代码过滤掉你没考虑到的情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E9%87%8C%E9%9D%A2%E7%9A%84%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E9%9C%80%E8%A6%81-try-catch"><span class="toc-number">1.29.</span> <span class="toc-text"> 29. 业务代码里面的异步请求需要 try catch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#30-setstate-%E6%9C%89%E4%B8%89%E7%A7%8D%E7%94%A8%E6%B3%95"><span class="toc-number">1.30.</span> <span class="toc-text"> 30. setState 有三种用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#31-setstate-%E5%8F%AF%E8%83%BD%E6%98%AF%E5%90%8C%E6%AD%A5%E7%9A%84"><span class="toc-number">1.31.</span> <span class="toc-text"> 31. setState 可能是同步的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-%E4%B8%8D%E8%A6%81%E5%9C%A8-setstate-%E5%89%8D%E9%9D%A2%E5%8A%A0-await"><span class="toc-number">1.32.</span> <span class="toc-text"> 32. 不要在 setState 前面加 await</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-%E9%98%BB%E6%AD%A2%E4%BA%8B%E4%BB%B6%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA"><span class="toc-number">1.33.</span> <span class="toc-text"> 33. 阻止事件默认行为</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-%E5%9C%A8-componentwillunmount-%E9%87%8C%E9%9D%A2%E5%8E%BB%E9%99%A4%E5%89%AF%E4%BD%9C%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.34.</span> <span class="toc-text"> 34. 在 componentWillUnmount 里面去除副作用的函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#35-key"><span class="toc-number">1.35.</span> <span class="toc-text"> 35. key</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36-for-in-%E4%B8%AD%E4%B8%80%E5%AE%9A%E8%A6%81%E6%9C%89-hasownproperty-%E7%9A%84%E5%88%A4%E6%96%AD%E5%8D%B3%E7%A6%81%E6%AD%A2%E7%9B%B4%E6%8E%A5%E8%AF%BB%E5%8F%96%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.36.</span> <span class="toc-text"> 36. for-in 中一定要有 hasOwnProperty 的判断（即禁止直接读取原型对象的属性）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#37-%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.37.</span> <span class="toc-text"> 37. 第三方库函数的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#38-%E9%98%B2%E6%AD%A2-xss-%E6%94%BB%E5%87%BB"><span class="toc-number">1.38.</span> <span class="toc-text"> 38. 防止 xss 攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#39-%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9E-dom"><span class="toc-number">1.39.</span> <span class="toc-text"> 39. 在组件中获取真实 dom</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#40-%E5%87%8F%E5%B0%91%E9%AD%94%E6%B3%95%E6%95%B0%E5%AD%97"><span class="toc-number">1.40.</span> <span class="toc-text"> 40. 减少魔法数字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#41-%E5%A6%82%E6%9E%9C%E9%9C%80%E8%A6%81%E4%BC%98%E5%8C%96-react-%E6%80%A7%E8%83%BD%E4%B8%80%E8%88%AC%E7%94%A8%E4%B8%8D%E5%88%B0"><span class="toc-number">1.41.</span> <span class="toc-text"> 41. 如果需要优化 react 性能（一般用不到）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-event-%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.42.</span> <span class="toc-text"> 42. Event 事件对象类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#43-%E4%BD%BF%E7%94%A8%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7%E5%8F%96%E4%BB%A3-state-%E7%8A%B6%E6%80%81"><span class="toc-number">1.43.</span> <span class="toc-text"> 43. 使用私有属性取代 state 状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#44-%E4%BB%A3%E7%A0%81%E7%BB%86%E7%B2%92%E5%BA%A6%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-number">1.44.</span> <span class="toc-text"> 44. 代码细粒度的思考</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#45-if-else-%E7%AD%89%E5%88%A4%E6%96%AD%E5%A4%AA%E5%A4%9A%E4%BA%86%E5%90%8E%E6%9C%9F%E9%9A%BE%E4%BB%A5%E7%BB%B4%E6%8A%A4"><span class="toc-number">1.45.</span> <span class="toc-text"> 45. if else 等判断太多了，后期难以维护。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#46-%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8-renderxxx%E8%A6%81%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">1.46.</span> <span class="toc-text"> 46. 不要使用 renderXXX, 要使用函数式组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#47-a-%E6%A0%87%E7%AD%BE%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-number">1.47.</span> <span class="toc-text"> 47. a 标签安全问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#48-void-0-%E6%9B%BF%E4%BB%A3-undefined"><span class="toc-number">1.48.</span> <span class="toc-text"> 48. void 0 替代 undefined</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#49-%E5%89%8D%E7%AB%AF%E4%B8%8D%E8%A6%81%E6%93%8D%E4%BD%9C-cookie"><span class="toc-number">1.49.</span> <span class="toc-text"> 49. 前端不要操作 cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#50-%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.50.</span> <span class="toc-text"> 50. 代码检查插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">1.51.</span> <span class="toc-text"> 参考</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li  class="active"><a href="/2023/10/08/2023.10.8/" rel="bookmark" title="react+ts 使用总结">react+ts 使用总结</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="xu" data-src="/assets/avatar.jpg"/><p class="name" itemprop="name">xu</p><div class="description" itemprop="description">永远热泪盈眶</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">5</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">3</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">3</span><span class="name">标签</span></a></div></nav><div class="social"><a href="https://github.com/name" class="item github" rel="noopener" title="https:&#x2F;&#x2F;github.com&#x2F;name" target="_blank"><i class="ic i-github"></i></a><a href="https://twitter.com/yourname" class="item twitter" rel="noopener" title="https:&#x2F;&#x2F;twitter.com&#x2F;yourname" target="_blank"><i class="ic i-twitter"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于本站</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/09/21/2023%E5%B9%B49%E6%9C%8821%E6%97%A5/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2023</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">xu @ xu·live</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">26k 字</span><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">24 分钟</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & Theme.<a href="https://github.com/theme-shoka-x/hexo-theme-shokaX/" rel="noopener" target="_blank">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
        path: `2023/10/08/2023.10.8/`,
        favicon: {
        show: `不负韶华`,
        hide: `以梦为马！`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    valine: true,
    chart: false,
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script src="https://polyfill.io/v3/polyfill.min.js?features=default,fetch"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.0.2/pace.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/instantsearch.js/4.39.0/instantsearch.production.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/quicklink/2.2.0/quicklink.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/??jquery/3.5.1/jquery.min.js,fancybox/3.5.7/jquery.fancybox.min.js,justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" async></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/KaTeX/0.15.2/contrib/copy-tex.min.js" async></script><script src="/js/app.js?v=0.3.5"></script></body></html>